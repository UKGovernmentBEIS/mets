<ng-container *ngIf="!isSubmitted(); else confirmationTemplate">
  <app-page-heading>Return to operator for changes</app-page-heading>
  <app-wizard-step
    (formSubmit)="onSubmit()"
    [formGroup]="form"
    submitText="Return to operator for changes"
    [hideSubmit]="!isEditable()"
  >
    <p class="govuk-body govuk-!-width-two-thirds">
      The operator will be notified by email that the report has been returned for changes.
    </p>

    <p class="govuk-body govuk-!-width-two-thirds">
      Verification progress is saved so that you can continue your review if the operator resubmits the report for
      verification.
    </p>

    <h2 class="govuk-heading-m govuk-!-margin-bottom-2">Changes required by the operator</h2>
    <div
      formControlName="changesRequired"
      [maxLength]="10000"
      govuk-textarea
      hint="This will be sent to the operator when you return the report"
      class="govuk-!-width-two-thirds"
    ></div>
  </app-wizard-step>
</ng-container>

<ng-template #confirmationTemplate>
  <app-confirmation-shared
    title="Returned to operator for changes"
    [whatHappensNextTemplate]="whatHappensNextTemplate"
    returnToLink="/dashboard"
  ></app-confirmation-shared>

  <ng-template #whatHappensNextTemplate>
    <p class="govuk-body">The report has been returned to the operator so they can make the necessary changes.</p>

    <h3 class="govuk-heading-m">What happens next</h3>

    <p class="govuk-body">They will return the report to you when the changes have been made.</p>
  </ng-template>
</ng-template>
